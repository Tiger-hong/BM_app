<!--venues.wxml-->
<view class="venues-container">
  <!-- å›ºå®šå¤´éƒ¨ï¼šæœç´¢æ å’Œç­›é€‰åŒºåŸŸ -->
  <view class="fixed-header">
    <!-- æœç´¢æ  -->
    <view class="search-section">
      <view class="search-bar">
        <input 
          class="search-input" 
          placeholder="æœç´¢çƒé¦†åç§°æˆ–åœ°å€"
          value="{{searchValue}}"
          bindinput="onSearchInput"
        />
        <image class="search-icon" src="/images/icons/search.png" mode="aspectFit"></image>
      </view>
    </view>

    <!-- ç­›é€‰åŒºåŸŸ -->
    <view class="filter-section">
    <!-- åœ°åŒºç­›é€‰ -->
      <view class="region-filter">
        <picker 
          class="region-picker"
          bindchange="onRegionChange" 
          value="{{selectedRegionIndex}}" 
          range="{{regionOptions}}" 
          range-key="name"
        >
          <view class="picker-display">
            <text class="picker-text">{{regionOptions[selectedRegionIndex].name}}</text>
            <text class="picker-arrow">â–¼</text>
          </view>
        </picker>
      </view>
      <!-- è®¾æ–½ç­›é€‰ -->
      <view class="facility-filter-options">
        <view 
          class="facility-filter-item {{selectedActive[item.id] ? 'active' : ''}}"
          data-facility="{{item.id}}"
          bindtap="onFacilityFilterToggle"
          wx:for="{{facilityOptions}}"
          wx:key="id"
        >
          <image class="facility-filter-icon" src="{{item.iconPath}}" mode="aspectFit"></image>
          <text class="facility-filter-name">{{item.name}}</text>
        </view>
      </view>
      <!-- é‡ç½®æŒ‰é’® -->
      <view class="reset-filter-btn" bindtap="onResetFilters">
        <image class="reset-filter-icon" src="/images/icons/reset.png" mode="aspectFit"></image>
      </view>
    </view>
  </view>

  <!-- çƒé¦†åˆ—è¡¨ -->
  <view class="venues-list">
    <!-- åŠ è½½çŠ¶æ€ -->
    <view class="loading-state" wx:if="{{loading && filteredVenues.length === 0}}">
      <view class="loading-container">
        <!-- ç¾½æ¯›çƒæ‹åŠ¨ç”»åŒºåŸŸ -->
        <view class="racket-animation">
          <!-- ç¾½æ¯›çƒæ‹æ‹é¢ï¼ˆæ°´å¹³çº¿ï¼‰ -->
          <view class="racket-face"></view>
          <!-- è·³åŠ¨çš„ç¾½æ¯›çƒ -->
          <view class="bouncing-shuttlecock">
            <image class="shuttlecock-icon" src="/images/icons/badminton1.png" mode="aspectFit"></image>
          </view>
        </view>
        <!-- åŠ è½½æ–‡å­— -->
        <view class="loading-text-container">
          <text class="loading-text">æ­£åœ¨åŠ è½½ç²¾å½©çƒé¦†</text>
          <view class="loading-dots">
            <view class="dot"></view>
            <view class="dot"></view>
            <view class="dot"></view>
          </view>
        </view>
      </view>
    </view>
    
    <view 
      class="venue-card" 
      wx:for="{{filteredVenues}}" 
      wx:key="id"
      data-id="{{item.id}}"
      bindtap="onVenueItemTap"
    >
      <!-- çƒé¦†å¤´éƒ¨ä¿¡æ¯ -->
      <view class="venue-header">
        <view class="venue-logo">
          <image 
            class="venue-logo-img" 
            src="{{item.logo}}" 
            mode="aspectFill" 
            wx:if="{{item.logo}}"
          ></image>
          <text class="venue-emoji" wx:else>ğŸ¸</text>
        </view>
        <view class="venue-basic-info">
          <view class="venue-name-row">
            <text class="venue-name">{{item.name}}</text>
          </view>
          <text class="venue-address">ğŸ“{{item.addressDisplay}}</text>
        </view>
      </view>

      <!-- çƒé¦†è¯¦ç»†ä¿¡æ¯ -->
      <view class="venue-details">
        <view class="venue-stats">
          <view class="stat-item">
            <text class="stat-label">åœºåœ°</text>
            <text class="stat-value">{{item.courts}}ç‰‡</text>
          </view>
          <view class="stat-item">
            <text class="stat-label">è¥ä¸šæ—¶é—´</text>
            <text class="stat-value">{{item.hours}}</text>
          </view>
          <view class="stat-item">
            <text class="stat-label">ä»·æ ¼</text>
            <text class="stat-value">{{item.price}}</text>
          </view>
        </view>

        <!-- è®¾æ–½æ ‡ç­¾ -->
        <!-- <view class="facilities">
          <view class="facility-tag" wx:for="{{item.facilitiesDisplay}}" wx:key="code">
            <image class="facility-tag-icon" src="{{item.iconPath}}" mode="aspectFit"></image>
            <text class="facility-tag-name">{{item.name}}</text>
          </view>
        </view> -->
      </view>
    </view>
  </view>

  <!-- ç©ºçŠ¶æ€ -->
  <view class="empty-state" wx:if="{{!loading && filteredVenues.length === 0}}">
    <text class="empty-icon">ğŸ¸</text>
    <text class="empty-text">æš‚æ— ç¬¦åˆæ¡ä»¶çš„çƒé¦†</text>
    <text class="empty-tip">è¯•è¯•è°ƒæ•´æœç´¢æ¡ä»¶</text>
  </view>
</view>
