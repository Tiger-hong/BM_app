<!--venue-detail.wxml-->
<view class="container">
  <!-- åŠ è½½çŠ¶æ€ -->
  <view class="loading-container" wx:if="{{loading}}">
    <view class="loading-wrapper">
      <!-- ç¾½æ¯›çƒæ‹åŠ¨ç”»åŒºåŸŸ -->
      <view class="racket-animation">
        <!-- ç¾½æ¯›çƒæ‹æ‹é¢ï¼ˆæ°´å¹³çº¿ï¼‰ -->
        <view class="racket-face"></view>
        <!-- è·³åŠ¨çš„ç¾½æ¯›çƒ -->
        <view class="bouncing-shuttlecock">
          <image class="shuttlecock-icon" src="/images/icons/badminton1.png" mode="aspectFit"></image>
        </view>
      </view>
      <!-- åŠ è½½æ–‡å­— -->
      <view class="loading-text-container">
        <text class="loading-text">æ­£åœ¨åŠ è½½çƒé¦†è¯¦æƒ…</text>
        <view class="loading-dots">
          <view class="dot"></view>
          <view class="dot"></view>
          <view class="dot"></view>
        </view>
      </view>
    </view>
  </view>

  <!-- è¯¦æƒ…å†…å®¹ -->
  <view class="detail-content" wx:else>
    <!-- çƒé¦†å›¾ç‰‡è½®æ’­ -->
    <view class="image-section">
      <swiper 
        class="image-swiper" 
        indicator-dots="{{venue.images && venue.images.length > 1}}"
        indicator-color="rgba(255,255,255,0.5)"
        indicator-active-color="#ffffff"
        autoplay="{{venue.images && venue.images.length > 1}}"
        interval="5000"
        duration="500"
        bindchange="onSwiperChange"
        wx:if="{{venue.images && venue.images.length > 0}}"
      >
        <swiper-item 
          wx:for="{{venue.images}}" 
          wx:key="*this"
          data-index="{{index}}"
          bindtap="onImageTap"
        >
          <image class="venue-image" src="{{item}}" mode="aspectFill"></image>
        </swiper-item>
      </swiper>
      
      <!-- é»˜è®¤å›¾ç‰‡ -->
      <view class="default-image" wx:else>
        <image class="venue-image" src="/images/default-venue.jpg" mode="aspectFill"></image>
      </view>
      
      <!-- å›¾ç‰‡è®¡æ•° -->
      <view class="image-count" wx:if="{{venue.images && venue.images.length > 1}}">
        <text>{{currentImageIndex + 1}}/{{venue.images.length}}</text>
      </view>
    </view>

    <!-- çƒé¦†åŸºæœ¬ä¿¡æ¯ -->
    <view class="venue-info">
      <view class="venue-header">
        <view class="venue-name">{{venue.name}}</view>
      </view>

      <view class="venue-address" bindtap="onOpenMap">
        <text class="address-icon">ğŸ“</text>
        <text class="address-text">{{venue.address}}</text>
        <text class="copy-hint">ç‚¹å‡»æŸ¥çœ‹</text>
      </view>

      <view class="venue-meta">
        <view class="meta-item">
          <text class="meta-icon">ğŸ’°</text>
          <view class="meta-content">
            <text class="meta-label">ä»·æ ¼</text>
            <text class="meta-value">{{venue.priceDisplay}}</text>
          </view>
        </view>
        <view class="meta-item">
          <text class="meta-icon">ğŸ•’</text>
          <view class="meta-content">
            <text class="meta-label">è¥ä¸šæ—¶é—´</text>
            <text class="meta-value">{{venue.hoursDisplay}}</text>
          </view>
        </view>
        <view class="meta-item">
          <text class="meta-icon">ğŸ¸</text>
          <view class="meta-content">
            <text class="meta-label">åœºåœ°æ•°é‡</text>
            <text class="meta-value">{{venue.courtsDisplay}}</text>
          </view>
        </view>
        <view class="meta-item" wx:if="{{venue.phone}}">
          <text class="meta-icon">ğŸ“</text>
          <view class="meta-content">
            <text class="meta-label">è”ç³»ç”µè¯</text>
            <text class="meta-value phone-number" bindtap="onCopyPhone">{{venue.phone}}</text>
          </view>
        </view>
      </view>
    </view>

    <!-- è®¾æ–½æœåŠ¡ -->
    <view class="facilities-section">
      <view class="section-title">
        <text class="title-icon">ğŸ¸</text>
        <text class="title-text">è®¾æ–½æœåŠ¡</text>
      </view>
      <view class="facilities-grid">
        <view 
          wx:for="{{allFacilities}}" 
          wx:key="code" 
          class="facility-item {{item.hasThis ? 'facility-available' : 'facility-unavailable'}}"
          data-code="{{item.code}}"
          data-facility="{{item}}"
          bindtap="onFacilityTap"
        >
          <image class="facility-icon" src="{{item.iconPath}}" mode="aspectFit"></image>
          <text class="facility-name">{{item.name}}</text>
        </view>
      </view>
    </view>

    <!-- çƒé¦†ä»‹ç» -->
    <view class="description-section" wx:if="{{venue.description}}">
      <view class="section-title">
        <text class="title-icon">ğŸ“</text>
        <text class="title-text">çƒé¦†ä»‹ç»</text>
      </view>
      <view class="description-content">
        <text class="description-text">{{venue.description}}</text>
      </view>
    </view>
  </view>
</view>