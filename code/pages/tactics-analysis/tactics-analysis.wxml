<!--tactics-analysis.wxml-->
<view class="container">
  <!-- æ¨¡å¼é€‰æ‹© -->
  <view class="mode-selector">
    <view class="mode-tabs">
      <view 
        class="mode-tab {{currentMode === 'singles' ? 'active' : ''}}" 
        bindtap="onModeChange" 
        data-mode="singles"
      >
        <text class="mode-text">å•æ‰“</text>
      </view>
      <view 
        class="mode-tab {{currentMode === 'doubles' ? 'active' : ''}}" 
        bindtap="onModeChange" 
        data-mode="doubles"
      >
        <text class="mode-text">åŒæ‰“</text>
      </view>
    </view>
    
    <!-- æ‰‹ç»˜åŠŸèƒ½æŒ‰é’® -->
    <view class="drawing-controls">
      <view 
        class="control-btn {{isDrawing ? 'active' : ''}}" 
        bindtap="onToggleDrawing"
      >
        <text class="control-icon">âœï¸</text>
        <text class="control-text">æ‰‹ç»˜</text>
      </view>
      <view 
        class="control-btn clear-btn" 
        bindtap="onClearDrawing"
      >
        <text class="control-icon">ğŸ—‘ï¸</text>
        <text class="control-text">æ¸…ç©º</text>
      </view>
    </view>
  </view>

  <!-- ç¾½æ¯›çƒåœºåœ° -->
  <view class="court-container">
    <canvas 
      class="court-canvas" 
      canvas-id="badmintonCourt"
      bindtouchstart="onCanvasTouchStart"
      bindtouchmove="onCanvasTouchMove"
      bindtouchend="onCanvasTouchEnd"
    ></canvas>
    
    <!-- çƒå‘˜å’Œçƒçš„å…ƒç´ è¦†ç›–å±‚ -->
    <view class="elements-overlay">
      <!-- ç¾½æ¯›çƒ -->
      <image 
        class="shuttlecock" 
        src="/images/icons/badminton.png"
        style="left: {{shuttlecock.x}}px; top: {{shuttlecock.y}}px;"
        data-type="shuttlecock"
        bindtouchstart="onElementTouchStart"
        bindtouchmove="onElementTouchMove"
        bindtouchend="onElementTouchEnd"
      ></image>
      
      <!-- çƒå‘˜Aé˜Ÿï¼ˆçº¢è‰²ï¼‰ -->
      <view 
        wx:for="{{playersA}}" 
        wx:key="id"
        class="player player-a" 
        style="left: {{item.x}}px; top: {{item.y}}px;"
        data-type="player"
        data-team="A"
        data-id="{{item.id}}"
        bindtouchstart="onElementTouchStart"
        bindtouchmove="onElementTouchMove"
        bindtouchend="onElementTouchEnd"
      >
        <view class="player-icon">ğŸƒâ€â™‚ï¸</view>
        <view class="player-label">A{{item.id}}</view>
      </view>
      
      <!-- çƒå‘˜Bé˜Ÿï¼ˆè“è‰²ï¼‰ -->
      <view 
        wx:for="{{playersB}}" 
        wx:key="id"
        class="player player-b" 
        style="left: {{item.x}}px; top: {{item.y}}px;"
        data-type="player"
        data-team="B"
        data-id="{{item.id}}"
        bindtouchstart="onElementTouchStart"
        bindtouchmove="onElementTouchMove"
        bindtouchend="onElementTouchEnd"
      >
        <view class="player-icon">ğŸƒâ€â™‚ï¸</view>
        <view class="player-label">B{{item.id}}</view>
      </view>
    </view>
  </view>
</view>